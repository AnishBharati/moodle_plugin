<style>
  .table-container {
    overflow-y: auto;
  }

  .table-container thead {
    position: sticky;
    top: 0;
    background-color: #f8f8f8;
    z-index: 1;
    display: table;
    width: 100%;
    table-layout: fixed;
    height: 50px;
  }

  .table-container tbody tr:nth-child(-n+5) {
    background-color: #f8f8f8;
  }

  .table-container tbody {
    display: block;
    max-height: calc(300px - 50px);
    overflow-y: auto;
  }

  .table-container tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
  }

  .filter-input {
    margin-bottom: 10px;
  }

  .dropdown-container {
    margin-bottom: 10px;
  }
  .dropdown-container {
  text-align: center;
  margin: auto;
}

#tableDropdown {
  display: block;
  margin: auto;
}

</style>

<h3 style="text-align: center;">Attendance Table</h3>

<div class="dropdown-container" >
  <label for="tableDropdown">Table Visibility:</label>
  <select id="tableDropdown" onchange="toggleTable()">
    <option value="show">Show Table</option>
    <option value="hide">Hide Table</option>
  </select>
</div>

<div class="filter-input" id="filterContainer">
  <label for="filterInput">Filter by Course:</label>
  <input type="text" id="filterInput" oninput="filterTable()" placeholder="Type to filter courses">
</div>

<div class="table-container" id="attendanceTableContainer">
  <table border="1" style="width:100%;">
    <thead>
      <tr>
        <th>Date</th>
        <th>Attendance</th>
        <th>Remarks</th>
        <th>Courses</th>
      </tr>
    </thead>
    <tbody id="attendanceTableBody">
      {{#attendanceData}}
        <tr data-course="{{courses}}">
          <td>{{date}}</td>
          <td>{{attendance}}</td>
          <td>{{remarks}}</td>
          <td>{{courses}}</td>
        </tr>
      {{/attendanceData}}
    </tbody>
  </table>
</div>

<script>
  function toggleTable() {
    var dropdownValue = document.getElementById("tableDropdown").value;
    var tableContainer = document.getElementById("attendanceTableContainer");
    var filterContainer = document.getElementById("filterContainer");

    if (dropdownValue === "show") {
      tableContainer.style.display = "block";
      filterContainer.style.display = "block";
    } else {
      tableContainer.style.display = "none";
      filterContainer.style.display = "none";
    }
  }

  function filterTable() {
    var filterValue = document.getElementById("filterInput").value.toUpperCase();
    var table = document.getElementById("attendanceTableBody");
    var rows = table.getElementsByTagName("tr");

    for (var i = 0; i < rows.length; i++) {
      var courseValue = rows[i].getAttribute("data-course").toUpperCase();
      var textContent = rows[i].textContent || rows[i].innerText;

      if (filterValue === "" || courseValue.includes(filterValue)) {
        rows[i].style.display = "";
      } else {
        rows[i].style.display = "none";
      }
    }
  }
</script>
